---
duration: 15
title: 'Build a NR1 app with React hooks'
template: 'GuideTemplate'
description: 'Build a simple NR1 app with React hooks'
---

<Intro>

Here's how you build a NR1 application using React hooks.

In this guide, you:

- Build a New Relic One application using React hooks
- Create a local version of the New Relic One site where you prototype your application

</Intro>

## Before you begin 

Developing NR1 applications requires a New Relic account and the New Relic One CLI (`nr1`).

If you haven't already:

- [Sign up](https://newrelic.com/signup/) for a New Relic account. You need [publish and subscribe permissions](https://developer.newrelic.com/build-apps/permission-manage-apps/) to complete this guide.
- Install [Node.js](https://nodejs.org/en/download/)
- Complete the [CLI quick start](https://one.newrelic.com/launcher/developer-center.launcher?pane=eyJuZXJkbGV0SWQiOiJkZXZlbG9wZXItY2VudGVyLmRldmVsb3Blci1jZW50ZXIifQ==)

Now, you have a Nerdpack, called `my-awesome-nerdpack`. This Nerdpack has a Nerdlet and a launcher that you named (though, this guide uses the default launcher name, "launcher", and Nerdlet name, "home"). You use this Nerdpack throughout this guide.

Finally, make sure your `nr1` is up-to-date:

```sh
nr1 update
```
<Callout variant="important">

React Hooks are supported in latest version of NR1 CLI (version 2.49.1) so make sure to update your CLI before you start.

</Callout>

For additional details about setting up your environment, see [Set up your development environment](/build-apps/set-up-dev-env) and [Enable advanced configurations for your Nerdpack](/build-apps/advanced-config).

<Callout variant="tip">

If you use VSCode, we have an [extension](https://marketplace.visualstudio.com/items?itemName=new-relic.nr1) and an [extension pack](https://marketplace.visualstudio.com/items?itemName=new-relic.new-relic-extension-pack) you can use to build your app.

</Callout>

## Update and serve your application locally

With `nr1`, you can serve a local build of your Nerdpack to New Relic One. This helps you develop your application in a production-like environment before you publish it.

Before you change any code, familiarize yourself with the Nerdpack's directory structure:

```txt lineHighlight=3-10,12
my-awesome-nerdpack/
‚îú‚îÄ‚îÄ‚îÄREADME.md
‚îú‚îÄ‚îÄ‚îÄlaunchers/
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄlauncher/
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄnr1.json
‚îú‚îÄ‚îÄ‚îÄnerdlets/
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄhome
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄindex.js
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄnr1.json
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄstyles.scss
‚îú‚îÄ‚îÄ‚îÄnode_modules/
‚îú‚îÄ‚îÄ‚îÄnr1.json
‚îú‚îÄ‚îÄ‚îÄpackage-lock.json
‚îî‚îÄ‚îÄ‚îÄpackage.json
```

The _launchers_ and _nerdlets_ directories contain the logic of your application. It's in these directories that you update most of your code. The _nr1.json_ files throughout the Nerdpack hold metadata about your Nerdpack, Nerdlets, and launchers.

<Callout variant="tip">

Read [our documentation](https://developer.newrelic.com/explore-docs/nerdpack-file-structure/) to learn more about the Nerdpack file structure.

</Callout>

<Steps>

<Step>

In _my-awesome-nerdpack/nerdlets/home/index.js_, change the class component _HomeNerdlet_ to functional component:

```js lineHighlight=5,7,9
import React from 'react';

// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {
    return <h1>Hello, home Nerdlet!</h1>;
}

export default HomeNerdlet
```

</Step>

<Step>

Next, change the default return message to show a Billboard Chart:

```js lineHighlight=2,7-17
import React from 'react';
import { BillboardChart} from 'nr1'
// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {

  const clickCount = {
    metadata: {
        id: '1',
        name: 'Count',
        viz: 'main',
    },
    data: [
      { "y": 10 }
    ]
  }
  return <BillboardChart data={[clickCount]}/>
}

export default HomeNerdlet
```
Here, you create an arbitrary data point to represent your BillboardChart. Right now, you're using a static data point but in future, you'll replace it with custom count object.

</Step>

<Step>

Serve your updated application: 
```bash
nr1 nerdpack:serve
[output] Found and loaded {success}2 {plain}nr1.json files on MyAwesomeNerdpack ({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) Nerdpack.
[output]
[output] {purple}Nerdpack:
[output]  {success}‚úî  MyAwesomeNerdpack {plain}({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) {blue}nr1.json
[output]
[output] {purple}Launchers:
[output]  {success}‚úî  launcher {blue}launchers/launcher/nr1.json
[output]
[output] {purple}Nerdlets:
[output]  {success}‚úî  home {blue}nerdlets/home/nr1.json
[output]
[output] There is no certificate created yet.
[output]  {success}‚úî  {plain}New certificate created.
[output]
[output] Webpack bundle analyzer is enabled (you need to wait for the first build to finish)
[output]  ‚îî  You can head to {blue}http://127.0.0.1:27888
[output]
[output] {blue}NOTE: {plain}To verify how your assets will look in production, you need to
[output]       add "--mode=prod" when starting the development server.
[output]
[output] üõ†  Built artifact files for:ex.js...
[output]  ‚Åé  {purple}aad7ebb6-8901-43d0-a681-0719b2c60a11--home {plain}built {success}‚úî
[output]
[output]  {success}‚úî  {plain}Nerdpack built successfully!
[output]  {yellow}‚òÖ  {plain}Starting as orchestrator...
[output]
[output]  {success}‚úî  {plain}Server ready! Test it at: {blue}https://one.newrelic.com/?nerdpacks=local
[output]  {blue}‚Ü©  {plain}Server will reload automatically if you modify any file!
[output]
[output]  {blue}‚Ñπ  {plain}Additionally, you can test the following artifacts at:
[output]
[output] {purple}Launchers:
[output]  ‚Åé  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
[output]  {blue}‚Ñπ  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.

```

</Step>

<Step>

Use the url at the bottom of the output to open your launcher:

```bash
[output] {purple}Launchers:
[output]  ‚Åé  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
[output]  {blue}‚Ñπ  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.
```

</Step>

<Step>

Here, you see your Nerdlet with your Billboard chart representating number "10":

![Static billboard in the browser](../../images/react-hooks/static-billboard-local.png)

</Step>

</Steps>
Leave the server running for now as it will reload automatically when you modify any file.

## Use the State Hook in your Nerdlet

Previously, you used a static data point for your Billboard Chart. However, you want to change that to represent an actual click count on your Billboard Chart. To do that, you add state to your functional component. 
Add the state hook to your Nerdlet:

<Steps>

<Step>

In _my-awesome-nerdpack/nerdlets/home/index.js_, declare a state variable inside your component:

```js lineHighlight=1,6
import React, {useState} from 'react';
import { BillboardChart} from 'nr1'
// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {
  const [count, setCount] = useState(0);
  
  const clickCount = {
    metadata: {
        id: '1',
        name: 'Count',
        viz: 'main',
    },
    data: [
      { "y": 10 }
    ]
  }
  return <BillboardChart data={[clickCount]}/>
}

export default HomeNerdlet
```
Here, you declare a state variable called `count` with 0 as default value.
</Step>

<Step>

Next, change your Billboard Chart data to represent the value of your state variable:
```js lineHighlight=15
import React, {useState} from 'react';
import { BillboardChart} from 'nr1'
// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {
  const [count, setCount] = useState(0);
  
  const clickCount = {
    metadata: {
        id: '1',
        name: 'Count',
        viz: 'main',
    },
    data: [
      { "y": count }
    ]
  }
  return <BillboardChart data={[clickCount]}/>
}

export default HomeNerdlet
```
Here, your Billboard chart now represnts the value of your state variable `count`. 
</Step>

<Step>

Your chart now represent the actual count. Right now, it uses the default value `0` but you need some way to increment the value of this variable. 

Change the return statement to include a button to increment `count`:

```js lineHighlight=18-25
import React, {useState} from 'react';
import { BillboardChart} from 'nr1'
// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {
  const [count, setCount] = useState(0);

  const clickCount = {
    metadata: {
        id: '1',
        name: 'Count',
        viz: 'main',
    },
    data: [
      { "y": count }
    ]
  }
  return (
    <div>
      <BillboardChart data={[clickCount]}/>
      <button onClick={() => setCount(count + 1)}> 
        Increment count
      </button>
    </div>
  );
}

export default HomeNerdlet
```
Here, you added a button to your Nerdlet which increment the count by 1 each time you click it. 
</Step>

<Step>
Move to your browser running the Nerdlet to see the changes:

![Increment count with button click](../../images/react-hooks/button-increment.png)

Click the button a few times to increment the count.

</Step>

</Steps>

## Use the Effect Hook in your Nerdlet

Your Nerdlet now has a Billboard chart that represents the number of times you clicked the button. As an optional step, you can use Effect Hook to automate the `count`.

<Steps>

<Step>

In _my-awesome-nerdpack/nerdlets/home/index.js_, create an effect:

```js lineHighlight=1,8-12,24-28
import React, {useState, useEffect} from 'react';
import { BillboardChart} from 'nr1'
// https://docs.newrelic.com/docs/new-relic-programmable-platform-introduction

function HomeNerdlet () {
  const [count, setCount] = useState(0);

  useEffect(() => {
    setTimeout(() => {
      setCount(() => count + 1);
    }, 1000);
  });

  const clickCount = {
    metadata: {
        id: '1',
        name: 'Count',
        viz: 'main',
    },
    data: [
      { "y": count }
    ]
  }
  return (
    <div>
      <BillboardChart data={[clickCount]}/>
    </div>
  );
}

export default HomeNerdlet
```
Here, useEffect will automatically increment the `count` value every 1 second. Since you automated the count, it's only rational to remove the increment button. 

</Step>

<Step>

Move to your browser to see the updates:
![Auto increment with Effect Hook](../../images/react-hooks/auto-increment.png)

</Step>

</Steps>

## Summary

Now that you've completed the steps in this example, you learned the basic steps to:

- Create a local NR1 application
- Use State Hook in your NR1 application
- Use Effect Hook in your NR1 application